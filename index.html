<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Banana 3D Tree AR</title>
  <!-- ‡πÇ‡∏´‡∏•‡∏î model-viewer -->
  <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="viewer-container">
  <!-- ‡πÇ‡∏°‡πÄ‡∏î‡∏• -->
  <model-viewer id="viewer"
    src="banana.glb"
    background-color="#d0f7c0"  
    ar
    ar-modes="webxr scene-viewer quick-look"
    auto-rotate
    camera-controls
    exposure="1.2"
    environment-image="neutral"
    shadow-intensity="1">

    <!-- Hotspot ‡∏•‡∏≥‡∏ï‡πâ‡∏ô -->
    <button slot="hotspot-1"
            data-position="0m 4.5m 3.5m"
            data-normal="0m 1m 0m"
            style="background: red; color: white;">
      ‡∏•‡∏≥‡∏ï‡πâ‡∏ô
    </button>

    <!-- Hotspot ‡πÉ‡∏ö‡πÑ‡∏°‡πâ -->
    <button slot="hotspot-2"
            data-position="0m 15m 9m"
            data-normal="0m 1m 0m"
            style="background: green; color: white;">
      ‡πÉ‡∏ö‡πÑ‡∏°‡πâ
    </button>

    <!-- Hotspot ‡∏ß‡∏¥‡∏ò‡∏µ‡∏î‡∏π‡πÅ‡∏• -->
    <button slot="hotspot-3"
            data-position="4m 2m 0m"
            data-normal="0m 1m 0m"
            style="background: blue; color: white;">
      ‡∏ß‡∏¥‡∏ò‡∏µ‡∏î‡∏π‡πÅ‡∏•
    </button>
  </model-viewer>

  <!-- UI Popup -->
  <div id="hotspot-ui" class="hotspot-ui">
    <p id="hotspot-text">‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á Hotspot</p>
    <audio id="hotspot-audio" src="info.mp3"></audio>
    <div class="button-group">
      <button id="play-sound">‚ñ∂ ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
      <button id="close-ui">‚úñ ‡∏õ‡∏¥‡∏î</button>
    </div>
  </div>

  <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° -->
  <div class="controls">
    <button onclick="playInfo()">‚ñ∂Ô∏è ‡∏ü‡∏±‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
    <button onclick="switchModel()">üîÑ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÇ‡∏°‡πÄ‡∏î‡∏•</button>
  </div>
</div>

<!-- ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏´‡∏•‡∏±‡∏Å -->
<audio id="infoSound" src="info.mp3"></audio>

<script>
  const hotspots = document.querySelectorAll('model-viewer button[slot^="hotspot"]');
  const hotspotUI = document.getElementById('hotspot-ui');
  const hotspotText = document.getElementById('hotspot-text');
  const hotspotAudio = document.getElementById('hotspot-audio');
  const playBtn = document.getElementById('play-sound');
  const closeBtn = document.getElementById('close-ui');

  // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ï‡πà‡∏•‡∏∞ Hotspot
  const hotspotData = {
    "hotspot-1": { text: "‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏•‡∏≥‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡∏Å‡∏•‡πâ‡∏ß‡∏¢", audio: "trunk.mp3" },
    "hotspot-2": { text: "‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡πÉ‡∏ö‡∏Å‡∏•‡πâ‡∏ß‡∏¢", audio: "leaves.mp3" },
    "hotspot-3": { text: "‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏ß‡∏¥‡∏ò‡∏µ‡∏î‡∏π‡πÅ‡∏•‡∏ï‡πâ‡∏ô‡∏Å‡∏•‡πâ‡∏ß‡∏¢", audio: "care.mp3" },
  };

  hotspots.forEach(btn => {
    btn.addEventListener('click', () => {
      const slot = btn.getAttribute('slot');
      hotspotText.textContent = hotspotData[slot].text;
      hotspotAudio.src = hotspotData[slot].audio;
      hotspotUI.style.display = 'block';
    });
  });

  // ‡∏õ‡∏¥‡∏î UI
  closeBtn.addEventListener('click', () => {
    hotspotUI.style.display = 'none';
    hotspotAudio.pause();
    hotspotAudio.currentTime = 0;
  });

  // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á
  playBtn.addEventListener('click', () => {
    hotspotAudio.play();
  });

  // ‡∏ü‡∏±‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏•‡∏±‡∏Å)
  function playInfo() {
    document.getElementById("infoSound").play();
  }

  // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÇ‡∏°‡πÄ‡∏î‡∏• (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á)
  function switchModel() {
    const viewer = document.getElementById("viewer");
    hidden viewer.src = viewer.src.includes("banana.glb") ? "banana2.glb" : "banana.glb";
  }
</script>

</body>
</html>
